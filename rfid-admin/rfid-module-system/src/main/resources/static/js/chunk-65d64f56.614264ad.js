(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65d64f56","chunk-2d0bdf09","chunk-2d0bdf09"],{"2dab":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-date-picker",{attrs:{dropdownClassName:"j-date-picker",disabled:e.disabled||e.readOnly,placeholder:e.placeholder,value:e.momVal,showTime:e.showTime,format:e.dateFormat,getCalendarContainer:e.getCalendarContainer},on:{change:e.handleDateChange}})},i=[],l=a("c1df"),s=a.n(l),o={name:"JDate",props:{placeholder:{type:String,default:"",required:!1},value:{type:String,required:!1},dateFormat:{type:String,default:"YYYY-MM-DD",required:!1},triggerChange:{type:Boolean,required:!1,default:!1},readOnly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},showTime:{type:Boolean,required:!1,default:!1},getCalendarContainer:{type:Function,default:function(e){return e.parentNode}}},data:function(){var e=this.value;return{decorator:"",momVal:e?s()(e,this.dateFormat):null}},watch:{value:function(e){this.momVal=e?s()(e,this.dateFormat):null}},methods:{moment:s.a,handleDateChange:function(e,t){this.$emit("change",t)}},model:{prop:"value",event:"change"}},r=o,u=a("2877"),d=Object(u["a"])(r,n,i,!1,null,null,null);t["default"]=d.exports},"707a":function(e,t,a){},7550:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.loading}},[a("a-row",{attrs:{type:"flex"}},[a("a-col",[e._t("buttonBefore",null,{target:e.getVM()})],2),a("a-col",[e.actionButton?a("div",{staticClass:"action-button"},[a("a-button",{attrs:{type:"primary",icon:"plus",disabled:e.disabled},on:{click:e.handleClickAdd}},[e._v("新增")]),a("span",{staticClass:"gap"}),e.selectedRowIds.length>0?[a("a-popconfirm",{attrs:{title:"确定要删除这 "+e.selectedRowIds.length+" 项吗?"},on:{confirm:e.handleConfirmDelete}},[a("a-button",{attrs:{type:"primary",icon:"minus",disabled:e.disabled}},[e._v("删除")]),a("span",{staticClass:"gap"})],1),e.showClearSelectButton?[a("a-button",{attrs:{icon:"delete"},on:{click:e.handleClickClearSelection}},[e._v("清空选择")]),a("span",{staticClass:"gap"})]:e._e()]:e._e()],2):e._e()]),a("a-col",[e._t("buttonAfter",null,{target:e.getVM()})],2)],1),e._t("actionButtonAfter",null,{target:e.getVM()}),a("div",{staticClass:"input-table",attrs:{id:e.caseId+"inputTable"}},[a("div",{ref:"thead",staticClass:"thead"},[a("div",{staticClass:"tr",style:{width:this.realTrWidth}},[e.dragSort?a("div",{staticClass:"td td-ds",style:e.style.tdLeft},[a("span")]):e._e(),e.rowSelection?a("div",{staticClass:"td td-cb",style:e.style.tdLeft},[a("a-checkbox",{attrs:{checked:e.getSelectAll,indeterminate:e.getSelectIndeterminate},on:{change:e.handleChangeCheckedAll}})],1):e._e(),e.rowNumber?a("div",{staticClass:"td td-num",style:e.style.tdLeft},[a("span",[e._v("#")])]):e._e(),e._l(e.columns,(function(t){return[a("div",{directives:[{name:"show",rawName:"v-show",value:t.type!==e.formTypes.hidden,expression:"col.type !== formTypes.hidden"}],key:t.key,staticClass:"td",style:e.buildTdStyle(t)},[a("span",[e._v(e._s(t.title))])])]}))],2)]),a("div",{ref:"scrollView",staticClass:"scroll-view",style:{"max-height":e.maxHeight+"px"}},[a("div",{staticClass:"tbody",style:e.tbodyStyle,attrs:{id:e.caseId+"tbody"}},[a("div",{staticClass:"tr-expand",style:"height:"+e.getExpandHeight+"px; z-index:"+(e.loading?"11":"9")+";"}),0===e.rows.length?a("div",{staticClass:"tr-nodata"},[a("span",[e._v("暂无数据")])]):e._e(),a("draggable",{attrs:{value:e.rows,handle:".td-ds-icons"},on:{start:e.handleDragMoveStart,end:e.handleDragMoveEnd}},[e._l(e.rows,(function(t,n){return[n>=parseInt(""+(e.scrollTop-e.rowHeight)/e.rowHeight)&&parseInt(""+e.scrollTop/e.rowHeight)+9>n?a("div",{key:t.id,staticClass:"tr",class:-1!==e.selectedRowIds.indexOf(t.id)?"tr-checked":"",style:e.buildTrStyle(n),attrs:{id:e.caseId+"tbody-tr-"+n,"data-idx":n},on:{click:e.handleClickTableRow}},[e.dragSort?a("div",{staticClass:"td td-ds",style:e.style.tdLeft,on:{dblclick:function(t){return e._handleRowInsertDown(n)}}},[a("a-dropdown",{attrs:{trigger:["click"],getPopupContainer:e.getParentContainer}},[a("div",{staticClass:"td-ds-icons"},[a("a-icon",{attrs:{type:"align-left"}}),a("a-icon",{attrs:{type:"align-right"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"0",attrs:{disabled:0===n},on:{click:function(t){return e._handleRowMoveUp(n)}}},[e._v("向上移")]),a("a-menu-item",{key:"1",attrs:{disabled:n===e.rows.length-1},on:{click:function(t){return e._handleRowMoveDown(n)}}},[e._v("向下移")]),a("a-menu-divider"),a("a-menu-item",{key:"3",on:{click:function(t){return e._handleRowInsertDown(n)}}},[e._v("插入一行")])],1)],1)],1):e._e(),e.rowSelection?a("div",{staticClass:"td td-cb",style:e.style.tdLeft},[e._l([""+t.id],(function(t,n){return[a("a-checkbox",{key:n,attrs:{id:t,checked:-1!==e.selectedRowIds.indexOf(t)},on:{change:e.handleChangeLeftCheckbox}})]}))],2):e._e(),e.rowNumber?a("div",{staticClass:"td td-num",style:e.style.tdLeft},[a("span",[e._v(e._s(n+1))])]):e._e(),e._l(e.columns,(function(i){return a("div",{directives:[{name:"show",rawName:"v-show",value:i.type!==e.formTypes.hidden,expression:"col.type !== formTypes.hidden"}],key:i.key,staticClass:"td",style:e.buildTdStyle(i)},[e._l([""+i.key+t.id],(function(l,s){return[i.type===e.formTypes.input||i.type===e.formTypes.inputNumber?a("label",{key:s},[a("a-tooltip",e._b({},"a-tooltip",e.buildTooltipProps(t,i,l),!1),[e.isEditRow(t,i)?a("input",e._b({attrs:{id:l,"data-input-number":i.type===e.formTypes.inputNumber,placeholder:e.replaceProps(i,i.placeholder)},on:{blur:function(a){e.handleBlurCommono(a.target,n,t,i)},input:function(a){e.handleInputCommono(a.target,n,t,i)}}},"input",e.buildProps(t,i),!1)):a("span",{staticClass:"j-td-span no-edit",class:{disabled:e.buildProps(t,i).disabled},on:{click:function(a){return e.handleEditRow(t,i)}}},[e._v(e._s(e.inputValues[n][i.key]))])])],1):i.type===e.formTypes.checkbox?[a("a-checkbox",e._b({key:s,attrs:{id:l,checked:e.checkboxValues[l]},on:{change:function(a){return e.handleChangeCheckboxCommon(a,t,i)}}},"a-checkbox",e.buildProps(t,i),!1))]:i.type===e.formTypes.select?[a("a-tooltip",e._b({},"a-tooltip",e.buildTooltipProps(t,i,l),!1),[e.isEditRow(t,i)?a("a-select",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:l,value:e.selectValues[l],options:i.options,getPopupContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder),filterOption:function(t,a){return e.handleSelectFilterOption(t,a,i)},allowClear:""},on:{change:function(a){return e.handleChangeSelectCommon(a,l,t,i)},search:function(a){return e.handleSearchSelect(a,l,t,i)},blur:function(a){return e.handleBlurSearch(a,l,t,i)}}},"a-select",e.buildProps(t,i),!1)):a("span",{staticClass:"j-td-span no-edit",class:{disabled:e.buildProps(t,i).disabled},on:{click:function(a){return a.stopPropagation(),e.handleEditRow(t,i)}}},[e._v(e._s(e.getSelectTranslateText(e.selectValues[l],t,i)))])],1)]:i.type===e.formTypes.date||i.type===e.formTypes.datetime?[a("a-tooltip",e._b({},"a-tooltip",e.buildTooltipProps(t,i,l),!1),[e.isEditRow(t,i)?a("j-date",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:l,value:e.jdateValues[l],getCalendarContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder),"trigger-change":!0,showTime:i.type===e.formTypes.datetime,dateFormat:i.type===e.formTypes.date?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss",allowClear:""},on:{change:function(a){return e.handleChangeJDateCommon(a,l,t,i,i.type===e.formTypes.datetime)}}},"j-date",e.buildProps(t,i),!1)):a("span",{staticClass:"j-td-span no-edit",class:{disabled:e.buildProps(t,i).disabled},on:{click:function(a){return e.handleEditRow(t,i)}}},[e._v(e._s(e.jdateValues[l]))])],1)]:i.type===e.formTypes.input_pop?[a("a-tooltip",e._b({},"a-tooltip",e.buildTooltipProps(t,i,l),!1),[e.isEditRow(t,i)?a("j-input-pop",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:l,width:300,height:210,"pop-container":e.caseId+"tbody",value:e.jInputPopValues[l],getCalendarContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder)},on:{change:function(a){return e.handleChangeJInputPopCommon(a,l,t,i)}}},"j-input-pop",e.buildProps(t,i),!1)):a("span",{staticClass:"j-td-span no-edit",class:{disabled:e.buildProps(t,i).disabled},on:{click:function(a){return e.handleEditRow(t,i)}}},[e._v(e._s(e.jInputPopValues[l]))])],1)]:i.type===e.formTypes.upload?a("div",{key:s},[e._l([e.uploadValues[l]||{}],(function(t,n){return null!=e.uploadValues[l]?[a("a-input",{key:n,attrs:{readOnly:!0,value:t.name}},[a("template",{staticStyle:{width:"30px"},slot:"addonBefore"},["uploading"===t.status?a("a-tooltip",{attrs:{title:"上传中("+Math.floor(t.percent)+"%)"}},[a("a-icon",{attrs:{type:"loading"}})],1):"done"===t.status?a("a-tooltip",{attrs:{title:"上传完成"}},[a("a-icon",{staticStyle:{color:"#00DB00"},attrs:{type:"check-circle"}})],1):a("a-tooltip",{attrs:{title:"上传失败"}},[a("a-icon",{staticStyle:{color:"red"},attrs:{type:"exclamation-circle"}})],1)],1),!1!==i.allowDownload||!1!==i.allowRemove?a("template",{staticStyle:{width:"30px"},slot:"addonAfter"},[a("a-dropdown",{attrs:{trigger:["click"],placement:"bottomRight",getPopupContainer:e.getParentContainer}},[a("a-tooltip",{attrs:{title:"操作",getPopupContainer:e.getParentContainer}},["uploading"!==t.status?a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"setting"}}):e._e()],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[!1!==i.allowDownload?a("a-menu-item",{on:{click:function(t){return e.handleClickDownloadFile(l)}}},[a("span",[a("a-icon",{attrs:{type:"download"}}),e._v(" 下载")],1)]):e._e(),!1!==i.allowRemove?a("a-menu-item",{on:{click:function(t){return e.handleClickDelFile(l)}}},[a("span",[a("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)]):e._e()],1)],1)],1):e._e()],2)]:e._e()})),a("div",{attrs:{hidden:null!=e.uploadValues[l]}},[a("a-tooltip",e._b({},"a-tooltip",e.buildTooltipProps(t,i,l),!1),[a("a-upload",e._b({attrs:{name:"file",data:{isup:1},multiple:!1,action:i.action,headers:e.uploadGetHeaders(t,i),showUploadList:!1},on:{change:function(a){return e.handleChangeUpload(a,l,t,i)}}},"a-upload",e.buildProps(t,i),!1),[a("a-button",{attrs:{icon:"upload"}},[e._v(e._s(i.placeholder))])],1)],1)],1)],2):i.type===e.formTypes.popup?[a("a-tooltip",e._b({},"a-tooltip",e.buildTooltipProps(t,i,l),!1),[e.isEditRow(t,i)?a("j-popup",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:l,placeholder:e.replaceProps(i,i.placeholder),value:e.getPopupValue(l),field:i.field||i.key,"org-fields":i.orgFields,"dest-fields":i.destFields,code:i.popupCode,groupId:e.caseId},on:{input:function(a,s){return e.popupCallback(a,s,l,t,i,n)}}},"j-popup",e.buildProps(t,i),!1)):a("span",{staticClass:"j-td-span no-edit",class:{disabled:e.buildProps(t,i).disabled},on:{click:function(a){return e.handleEditRow(t,i)}}},[e._v(e._s(e.getPopupValue(l)))])],1)]:i.type===e.formTypes.file?a("div",{key:s},[e._l([e.uploadValues[l]||{}],(function(t,n){return null!=e.uploadValues[l]?[a("div",{key:n,staticStyle:{position:"relative"}},["uploading"===t.status?a("a-tooltip",{attrs:{title:"上传中("+Math.floor(t.percent)+"%)"}},[a("a-icon",{staticStyle:{color:"red"},attrs:{type:"loading"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[e._v(e._s(t.status))])],1):"done"===t.status?a("a-tooltip",{attrs:{title:t.name}},[a("a-icon",{attrs:{type:"paper-clip"}}),a("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.getEllipsisWord(t.name,5)))])],1):a("a-tooltip",{attrs:{title:t.name}},[a("a-icon",{staticStyle:{color:"red"},attrs:{type:"paper-clip"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[e._v(e._s(e.getEllipsisWord(t.name,5)))])],1),[a("a-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:["click"],placement:"bottomRight",getPopupContainer:e.getParentContainer}},[a("a-tooltip",{attrs:{title:"操作",getPopupContainer:e.getParentContainer}},["uploading"!==t.status?a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"setting"}}):e._e()],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[!1!==i.allowDownload?a("a-menu-item",{on:{click:function(t){return e.handleClickDownFileByUrl(l)}}},[a("span",[a("a-icon",{attrs:{type:"download"}}),e._v(" 下载")],1)]):e._e(),a("a-menu-item",{on:{click:function(t){return e.handleClickDelFile(l)}}},[a("span",[a("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)]),a("a-menu-item",{on:{click:function(t){return e.handleMoreOperation(l)}}},[a("span",[a("a-icon",{attrs:{type:"bars"}}),e._v(" 更多")],1)])],1)],1)]],2)]:e._e()})),a("div",{attrs:{hidden:null!=e.uploadValues[l]}},[a("a-tooltip",e._b({},"a-tooltip",e.buildTooltipProps(t,i,l),!1),[a("a-upload",e._b({attrs:{name:"file",data:{isup:1},multiple:!1,action:e.getUploadAction(i.action),headers:e.uploadGetHeaders(t,i),showUploadList:!1},on:{change:function(a){return e.handleChangeUpload(a,l,t,i)}}},"a-upload",e.buildProps(t,i),!1),[a("a-button",{attrs:{icon:"upload"}},[e._v("上传文件")])],1)],1)],1)],2):i.type===e.formTypes.image?a("div",{key:s},[e._l([e.uploadValues[l]||{}],(function(t,n){return null!=e.uploadValues[l]?[a("div",{key:n,staticStyle:{position:"relative"}},[e.uploadValues[l]&&(e.uploadValues[l]["url"]||e.uploadValues[l]["path"]||e.uploadValues[l]["message"])?e.uploadValues[l]["path"]?[a("img",{staticClass:"j-editable-image",attrs:{src:e.getCellImageView(l),alt:"无图片"},on:{click:function(t){return e.handleMoreOperation(l,"img")}}})]:[a("a-icon",{staticStyle:{color:"red"},attrs:{type:"exclamation-circle"},on:{click:function(t){return e.handleClickShowImageError(l)}}})]:[a("a-icon",{attrs:{type:"loading"}})],a("template",{staticStyle:{width:"30px"},slot:"addonBefore"},["uploading"===t.status?a("a-tooltip",{attrs:{title:"上传中("+Math.floor(t.percent)+"%)"}},[a("a-icon",{attrs:{type:"loading"}})],1):"done"===t.status?a("a-tooltip",{attrs:{title:"上传完成"}},[a("a-icon",{staticStyle:{color:"#00DB00"},attrs:{type:"check-circle"}})],1):a("a-tooltip",{attrs:{title:"上传失败"}},[a("a-icon",{staticStyle:{color:"red"},attrs:{type:"exclamation-circle"}})],1)],1),[a("a-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:["click"],placement:"bottomRight",getPopupContainer:e.getParentContainer}},[a("a-tooltip",{attrs:{title:"操作",getPopupContainer:e.getParentContainer}},["uploading"!==t.status?a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"setting"}}):e._e()],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[!1!==i.allowDownload?a("a-menu-item",{on:{click:function(t){return e.handleClickDownFileByUrl(l)}}},[a("span",[a("a-icon",{attrs:{type:"download"}}),e._v(" 下载")],1)]):e._e(),a("a-menu-item",{on:{click:function(t){return e.handleClickDelFile(l)}}},[a("span",[a("a-icon",{attrs:{type:"delete"}}),e._v(" 删除")],1)]),a("a-menu-item",{on:{click:function(t){return e.handleMoreOperation(l,"img")}}},[a("span",[a("a-icon",{attrs:{type:"bars"}}),e._v(" 更多")],1)])],1)],1)]],2)]:e._e()})),a("div",{attrs:{hidden:null!=e.uploadValues[l]}},[a("a-tooltip",e._b({},"a-tooltip",e.buildTooltipProps(t,i,l),!1),[a("a-upload",e._b({attrs:{name:"file",data:{isup:1},multiple:!1,action:e.getUploadAction(i.action),headers:e.uploadGetHeaders(t,i),showUploadList:!1},on:{change:function(a){return e.handleChangeUpload(a,l,t,i)}}},"a-upload",e.buildProps(t,i),!1),[a("a-button",{attrs:{icon:"upload"}},[e._v("上传图片")])],1)],1)],1)],2):i.type===e.formTypes.radio?[a("a-tooltip",e._b({},"a-tooltip",e.buildTooltipProps(t,i,l),!1),[a("a-radio-group",e._b({key:s,attrs:{id:l,value:e.radioValues[l]},on:{change:function(a){return e.handleRadioChange(a.target.value,l,t,i)}}},"a-radio-group",e.buildProps(t,i),!1),e._l(i.options,(function(t,n){return a("a-radio",{key:n,attrs:{value:t.value}},[e._v(e._s(t.text))])})),1)],1)]:i.type===e.formTypes.list_multi?[a("a-tooltip",e._b({},"a-tooltip",e.buildTooltipProps(t,i,l),!1),[e.isEditRow(t,i)?a("a-select",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:l,mode:"multiple",maxTagCount:1,value:e.multiSelectValues[l],options:i.options,getPopupContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder),allowClear:""},on:{change:function(a){return e.handleMultiSelectChange(a,l,t,i)}}},"a-select",e.buildProps(t,i),!1)):a("span",{staticClass:"j-td-span no-edit",class:{disabled:e.buildProps(t,i).disabled},on:{click:function(a){return e.handleEditRow(t,i)}}},[e._v(e._s(e.getSelectTranslateText(e.multiSelectValues[l],t,i))+" ")])],1)]:i.type===e.formTypes.sel_search?[a("a-tooltip",e._b({},"a-tooltip",e.buildTooltipProps(t,i,l),!1),[e.isEditRow(t,i)?a("a-select",e._b({key:s,staticStyle:{width:"100%"},attrs:{id:l,showSearch:"",optionFilterProp:"children",filterOption:e.filterOption,value:e.searchSelectValues[l],options:i.options,getPopupContainer:e.getParentContainer,placeholder:e.replaceProps(i,i.placeholder),allowClear:""},on:{change:function(a){return e.handleSearchSelectChange(a,l,t,i)}}},"a-select",e.buildProps(t,i),!1)):a("span",{staticClass:"j-td-span no-edit",class:{disabled:e.buildProps(t,i).disabled},on:{click:function(a){return e.handleEditRow(t,i)}}},[e._v(e._s(e.getSelectTranslateText(e.searchSelectValues[l],t,i)))])],1)]:i.type===e.formTypes.slot?a("div",{key:s},[a("a-tooltip",e._b({},"a-tooltip",e.buildTooltipProps(t,i,l),!1),[e._t(i.slot||i.slotName||i.key,null,{index:n,text:e.slotValues[l],value:e.slotValues[l],column:i,rowId:e.getCleanId(t.id),getValue:function(){return e._getValueForSlot(t.id)},caseId:e.caseId,allValues:e._getAllValuesForSlot(),target:e.getVM(),handleChange:function(a){return e.handleChangeSlotCommon(a,l,t,i)},isNotPass:e.notPassedIds.includes(i.key+t.id)})],2)],1):a("span",e._b({key:s},"span",e.buildProps(t,i),!1),[e._v(e._s(e.inputValues[n][i.key]))])]}))],2)}))],2):e._e()]}))],2),e.showStatisticsRow?a("div",{staticClass:"tr",style:Object.assign({},e.buildTrStyle(e.rows.length),{height:"32px"})},[e.dragSort?a("div",{staticClass:"td td-ds",style:e.style.tdLeft}):e._e(),e.rowSelection?a("div",{staticClass:"td td-cb",style:e.style.tdLeft},[e._v("\n            统计\n          ")]):e._e(),e.rowNumber?a("div",{staticClass:"td td-num",style:e.style.tdLeft},[e.rowSelection?e._e():a("span",[e._v("统计")])]):e._e(),e._l(e.columns,(function(t){return[a("div",{directives:[{name:"show",rawName:"v-show",value:t.type!==e.formTypes.hidden,expression:"col.type !== formTypes.hidden"}],key:t.key,staticClass:"td",style:e.buildTdStyle(t)},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.type===e.formTypes.inputNumber,expression:"col.type === formTypes.inputNumber"}],staticStyle:{padding:"0 5px"}},[e._v(e._s(e.statisticsColumns[t.key]))])])]}))],2):e._e()],1)]),a("j-file-pop",{ref:"filePop",on:{ok:e.handleFileSuccess}})],1)],2)},i=[],l=a("2b0e"),s=a("310e"),o=a.n(s),r=a("9fb0"),u=a("e2e0"),d=a("ca00"),c=a("2dab"),p=a("89f2"),h=a("0fea"),f=a("5f64"),y=a("242f");function m(e,t){return b(e)||v(e,t)||g()}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function v(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],n=!0,i=!1,l=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)if(a.push(s.value),t&&a.length===t)break}catch(r){i=!0,l=r}finally{try{n||null==o["return"]||o["return"]()}finally{if(i)throw l}}return a}}function b(e){if(Array.isArray(e))return e}function w(e){return w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function V(e){return k(e)||S(e)||C()}function C(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function S(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function k(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){P(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var O=61,T={name:"JEditableTable",components:{JDate:c["default"],Draggable:o.a,JInputPop:f["default"],JFilePop:y["default"]},provide:function(){var e=this;return{parentIsJEditableTable:!0,getDestroyCleanGroupRequest:function(){return e.destroyCleanGroupRequest}}},props:{columns:{type:Array,required:!0},dataSource:{type:Array,required:!0,default:function(){return[]}},actionButton:{type:Boolean,default:!1},rowNumber:{type:Boolean,default:!1},rowSelection:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},maxHeight:{type:Number,default:400},disabledRows:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1},dragSort:{type:Boolean,default:!1},dragSortKey:{type:String,default:"orderNum"},alwaysEdit:{type:Boolean,default:!0}},data:function(){return{isFirst:!0,isJEditableTable:!0,caseId:"_jet-".concat(Object(d["k"])(6),"-"),tempId:"_tid-".concat(Object(d["k"])(6)),el:{inputTable:null,tbody:null},style:{tbody:{left:"0px"},tdLeft:{}},formTypes:u["a"],rows:[],rowHeight:O,scrollTop:0,selectValues:{},checkboxValues:{},jdateValues:{},jInputPopValues:{},slotValues:{},uploadValues:{},popupValues:{},radioValues:{},metaCheckboxValues:{},multiSelectValues:{},searchSelectValues:{},selectedRowIds:[],deleteIds:[],tooltips:{},notPassedIds:[],dragging:!1,hasStatisticsColumn:!1,statisticsColumns:{},destroyCleanGroupRequest:!1,currentEditRows:{},lastPushTimeMap:new Map}},created:function(){var e=this;this.inputValues=[],this.visibleTrEls=[],this.disabledRowIds=this.disabledRowIds||[],document.body.ondrop=function(t){e.dragging&&(t.preventDefault(),t.stopPropagation())}},computed:{getExpandHeight:function(){var e=this.rows.length*this.rowHeight;return this.showStatisticsRow&&(e+=34),e},showStatisticsRow:function(){return this.hasStatisticsColumn&&this.rows.length>0},getSelectIndeterminate:function(){return this.selectedRowIds.length>0&&this.selectedRowIds.length<this.rows.length},getSelectAll:function(){return this.selectedRowIds.length===this.rows.length&&this.rows.length>0},tbodyStyle:function(){var e=Object.assign({},this.style.tbody);return e["width"]=this.realTrWidth,e},showClearSelectButton:function(){var e=0;for(var t in this.disabledRows)this.disabledRows.hasOwnProperty(t)&&e++;return e>0},accessToken:function(){return l["default"].ls.get(r["a"])},realTrWidth:function(){var e=" + ",t="calc(";return this.columns.forEach((function(a,n){var i=a.type,l=a.width;i!==u["a"].hidden&&(t+="number"===typeof l?l+"px":"string"===typeof l?l:"120px",t+=e)})),t.endsWith(e)&&(t=t.substring(0,t.length-e.length)),t+=")",t}},watch:{rows:{immediate:!0,handler:function(e,t){}},dataSource:{immediate:!0,handler:function(e){var t=this;this.getElementPromise("tbody").then((function(){t.initialize(),t._pushByDataSource(e)}))}},columns:{immediate:!0,handler:function(e){var t=this;this.getElementPromise("tbody").then((function(){e.forEach((function(e){e.type!==u["a"].select&&e.type!==u["a"].list_multi&&e.type!==u["a"].sel_search||(e.options instanceof Array&&(e.options=e.options.map((function(e){return e?_({},e,{text:e.text||e.title,title:e.text||e.title}):{}}))),e.dictCode&&t._loadDictConcatToOptions(e))}))}))}},selectedRowIds:function(e){var t=this;this.$emit("selectRowChange",Object(d["b"])(e).map((function(e){return t.getCleanId(e)})))}},mounted:function(){var e=this;this.getElement("inputTable").onscroll=function(t){e.syncScrollBar(t.target.scrollLeft)},this.getElement("tbody").onscroll=function(e){};var t=this.$refs,a=t.thead,n=t.scrollView;n.onscroll=function(t){a.scrollLeft=t.target.scrollLeft,e.recalcTrHiddenItem(t.target.scrollTop)},this.addEventListener()},methods:{getElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.el[e]||(this.el[e]=document.getElementById((t?"":this.caseId)+e)),this.el[e]},getElementPromise:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(n){var i=setInterval((function(){var l=t.getElement(e,a);l&&(clearInterval(i),n(l))}),10)}))},initialize:function(){var e=this;this.visibleTrEls=[],this.isFirst?this.isFirst=!1:(this.inputValues=[],this.rows=[],this.deleteIds=[],this.selectValues={},this.checkboxValues={},this.jdateValues={},this.jInputPopValues={},this.slotValues={},this.selectedRowIds=[],this.tooltips={},this.notPassedIds=[],this.uploadValues=[],this.popupValues=[],this.radioValues=[],this.multiSelectValues=[],this.searchSelectValues=[],this.scrollTop=0,this.$nextTick((function(){e.getElement("tbody").scrollTop=0})))},syncScrollBar:function(e){},resetScrollTop:function(e){var t=this.$refs.scrollView;t.scrollTop=null!=e&&"number"===typeof e?e:this.scrollTop},recalcTrHiddenItem:function(e){var t=this,a=e-this.scrollTop;a<0&&(a=this.scrollTop-e),a>=.3*this.rowHeight&&(this.scrollTop=e,this.$nextTick((function(){t.updateFormValues()})))},generateId:function(e){e instanceof Array||(e=this.rows||[]);var t=(new Date).getTime();return"".concat(this.caseId).concat(t).concat(e.length).concat(Object(d["j"])(6)).concat(this.tempId)},push:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return this._pushByDataSource([e],[n],t,a,i)},_pushByDataSource:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];i instanceof Array||(i=V(this.rows)||[]);var s=_({},this.checkboxValues),o=_({},this.selectValues),r=_({},this.jdateValues),d=_({},this.jInputPopValues),c=_({},this.slotValues),p=_({},this.uploadValues),h=_({},this.popupValues),f=_({},this.radioValues),y=_({},this.multiSelectValues),m=_({},this.searchSelectValues),g=this.disabledRowIds||[];return e.forEach((function(e,n){var v=e.id;null==v||""===v?v=t.generateId(i):t.hasCaseId(v)||(v=t.caseId+v);var b={id:v},w={id:v},V=!1;t.columns.forEach((function(a){var n=a.key+w.id,i=(null==e[a.key]?"":e[a.key]).toString(),v=null;l&&(v=a.defaultValue||(0===a.defaultValue?0:""),v instanceof Array&&(v=v.join(",")),i="number"===typeof i||i?i:v);var C=null==i||""===i;if(a.type===u["a"].inputNumber)!0===a.isOrder?w[a.key]=t.getInputNumberMaxValue(a)+1:w[a.key]=i,a.statistics&&(t.hasStatisticsColumn=!0,t.statisticsColumns[a.key]||t.$set(t.statisticsColumns,a.key,0));else if(a.type===u["a"].checkbox)if(a.customValue instanceof Array){var S=(a.customValue[0]||"").toString();C&&l&&(i=a.defaultChecked?S:i),s[n]=i===S}else s[n]=C&&l?!!a.defaultChecked:i;else if(a.type===u["a"].select)C?o[n]=void 0:("string"===typeof i&&"multiple"===(a.props||{})["mode"]&&(i=""===i?[]:i.split(",")),o[n]=i);else if(a.type===u["a"].date||a.type===u["a"].datetime)r[n]=i;else if(a.type===u["a"].slot)c[n]=i;else if(a.type===u["a"].popup)h[n]=i;else if(a.type===u["a"].input_pop)d[n]=i;else if(a.type===u["a"].radio)f[n]=i;else if(a.type===u["a"].sel_search)m[n]=i;else if(a.type===u["a"].list_multi)"string"===typeof i&&i.length>0?y[n]=i.split(","):y[n]=[];else if(a.type===u["a"].upload||a.type===u["a"].file||a.type===u["a"].image){if(i){var k="";if(i.indexOf(",")>0){var I=i.split(",")[0];k=I.substring(I.lastIndexOf("/")+1)}else k=i.substring(i.lastIndexOf("/")+1);p[n]={name:k,status:"done",path:i}}}else w[a.key]=i;for(var _ in t.disabledRows)if(t.disabledRows.hasOwnProperty(_)&&e.hasOwnProperty(_)&&!0!==V){var P=t.disabledRows[_];V=P instanceof Array?P.includes(e[_]):P===e[_],V&&g.push(b.id)}}));var C=!1;if(a instanceof Array){var S=a[n];"number"===typeof S&&(C=!0,i.splice(S,0,b),t.inputValues.splice(S,0,w))}C||(i.push(b),t.inputValues.push(w))})),this.dragSort&&this.inputValues.forEach((function(e,a){e[t.dragSortKey]=a+1})),this.disabledRowIds=g,this.checkboxValues=s,this.selectValues=o,this.jdateValues=r,this.jInputPopValues=d,this.slotValues=c,this.uploadValues=p,this.popupValues=h,this.radioValues=f,this.multiSelectValues=y,this.searchSelectValues=m,this.recalcAllStatisticsColumns(),n&&(this.rows=i,this.$nextTick((function(){t.forceUpdateFormValues()}))),i},getInputNumberMaxValue:function(e){var t=0;return this.inputValues.forEach((function(a,n){var i,l=a[e.key];try{i=parseInt(l)}catch(s){i=0}t=0===n||i>t?i:t})),t},add:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(t<1)){for(var n,i=this.rows,l=0;l<t;l++)i=this.push({},!1,i),n=i[i.length-1];this.rows=i,this.$nextTick((function(){e.updateFormValues()})),this.$emit("added",{row:function(){var t=Object.assign({},n);return t.id=e.getCleanId(t.id),t}(),target:this});var s=this.getElement("tbody"),o=s.offsetHeight,r=s.scrollTop+o;(!1!==a||s.scrollHeight-r<=10)&&this.$nextTick((function(){s.scrollTop=s.scrollHeight}))}},insert:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this.checkTooFastClick("insert",1500)&&(e||!(a<1))){for(var n=this.rows,i=[],l=0;l<a;l++){var s={id:this.generateId(n)};n=this.push(s,!1,n,e),i.push(s)}this.rows=n,this.$nextTick((function(){t.recalcSortNumber(),t.forceUpdateFormValues()})),this.$emit("inserted",{rows:i.map((function(e){var a=Object(d["b"])(e);return a.id=t.getCleanId(a.id),a})),num:a,insertIndex:e,target:this})}},removeSelectedRows:function(){this.removeRows(this.selectedRowIds),this.selectedRowIds=[]},removeRows:function(e){var t=this,a=e;if(!(e instanceof Array)){if("string"!==typeof e)throw"JEditableTable.removeRows() 函数需要的参数可以是string或Array类型，但提供的却是".concat(w(e));a=[e]}var n=Object(d["b"])(this.rows);return a.forEach((function(e){e=t.getCleanId(e);var a=function(a){for(var n=0;n<a.length;n++){var i=t.getCleanId(a[n].id);if(i===e)return a.splice(n,1),!0}};if(a(n)){a(t.inputValues);var i=t.getCleanId(e);t.deleteIds.push(i)}})),this.rows=n,this.$emit("deleted",this.getDeleteIds(),this),this.$nextTick((function(){t.updateFormValues(),t.recalcAllStatisticsColumns()})),!0},getValuesAsync:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,n=t.validate,i=t.rowIds,l=t.deleteTempId;"boolean"!==typeof n&&(n=!0),i instanceof Array||(i=null),"boolean"!==typeof l&&(l=!1);var s=0,o=0,r=Object(d["b"])(this.inputValues),c=Object.assign({},this.tooltips),p=Object(d["b"])(this.notPassedIds),h=[],f=!0,y=!1,m=void 0;try{for(var g,v=function(){var t=g.value,a=!1;if(null==i)a=!0;else{var r=!0,f=!1,y=void 0;try{for(var m,v=i[Symbol.iterator]();!(r=(m=v.next()).done);r=!0){var b=m.value;if(e.getCleanId(b)===e.getCleanId(t.id)){a=!0;break}}}catch(w){f=!0,y=w}finally{try{r||null==v.return||v.return()}finally{if(f)throw y}}}if(!a)return"continue";e.columns.forEach((function(a){var i=a.key+t.id;if(a.type===u["a"].checkbox){var l=e.checkboxValues[i];a.customValue instanceof Array?t[a.key]=l?a.customValue[0]:a.customValue[1]:t[a.key]=l}else if(a.type===u["a"].select){var r=e.selectValues[i];t[a.key]=r instanceof Array?Object(d["b"])(r):r}else if(a.type===u["a"].date||a.type===u["a"].datetime)t[a.key]=e.jdateValues[i];else if(a.type===u["a"].input_pop)t[a.key]=e.jInputPopValues[i];else if(a.type===u["a"].upload)t[a.key]=Object(d["b"])(e.uploadValues[i]||null);else if(a.type===u["a"].image||a.type===u["a"].file){var h=Object(d["b"])(e.uploadValues[i]||null);h&&(t[a.key]=h["path"]||null)}else a.type===u["a"].popup?t[a.key]||(t[a.key]=e.popupValues[i]||null):a.type===u["a"].radio?t[a.key]=e.radioValues[i]:a.type===u["a"].sel_search?t[a.key]=e.searchSelectValues[i]:a.type===u["a"].list_multi?e.multiSelectValues[i]&&0!==e.multiSelectValues[i].length?t[a.key]=e.multiSelectValues[i].join(","):t[a.key]="":a.type===u["a"].slot&&(t[a.key]=e.slotValues[i]);if(!0===n){var f=function(e){c[i]=e[0],!1===c[i].passed&&o++,c[i].visible=!1,p=e[1]};s++;var y=e.validateOneInputAsync(t[a.key],t,a,p,!1,"getValues",(function(e){f(e),s--}));f(y)}})),l&&e.isTempId(t.id)?delete t.id:t.id=e.getCleanId(t.id),h.push(t)},b=r[Symbol.iterator]();!(f=(g=b.next()).done);f=!0)v()}catch(V){y=!0,m=V}finally{try{f||null==b.return||b.return()}finally{if(y)throw m}}!0===n&&(this.tooltips=c,this.notPassedIds=p);var w=setInterval((function(){0===s&&(clearInterval(w),"function"===typeof a&&a({error:o,values:h}))}),10);return{error:o,values:h}},getValuesSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getValuesAsync(e)},getValues:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;this.getValuesAsync({validate:t,rowIds:a},(function(t){var a=t.error,n=t.values;"function"===typeof e&&e(a,n)}))},getValuesPromise:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return new Promise((function(i,l){e.getValuesAsync({validate:t,rowIds:a,deleteTempId:n},(function(e){var t=e.error,a=e.values;0===t?i(a):l(u["b"])}))}))},getDeleteIds:function(){return Object(d["b"])(this.deleteIds)},getAll:function(e,t){var a=this;return new Promise((function(n,i){var l=a.getDeleteIds();a.getValuesPromise(e,null,t).then((function(e){n({values:e,deleteIds:l})})).catch((function(e){i(e)}))}))},getAllSync:function(e,t,a){var n=this.getValuesSync({validate:e,rowIds:t,deleteTempId:a});return n.deleteIds=this.getDeleteIds(),n},_getValueForSlot:function(e){return this.getValuesSync({rowIds:[e]}).values[0]},_getAllValuesForSlot:function(){return Object(d["b"])({inputValues:this.inputValues,selectValues:this.selectValues,checkboxValues:this.checkboxValues,jdateValues:this.jdateValues,jInputPopValues:this.jInputPopValues,slotValues:this.slotValues,uploadValues:this.uploadValues,popupValues:this.popupValues,radioValues:this.radioValues,multiSelectValues:this.multiSelectValues,searchSelectValues:this.searchSelectValues})},setValues:function(e){var t=this;e.forEach((function(e){var a=e.rowKey,n=e.values;a=t.getCleanId(a);var i=function(e){if(n.hasOwnProperty(e)){var i=!1,l=!0,s=!1,o=void 0;try{for(var r,d=t.columns[Symbol.iterator]();!(l=(r=d.next()).done);l=!0){var c=r.value;c.key===e&&function(){var l=n[e];if(t.inputValues.forEach((function(n){a===t.getCleanId(n.id)&&n.hasOwnProperty(e)&&(i=!0,n[e]=l)})),!i){var s="".concat(e).concat(t.caseId).concat(a);if(c.type===u["a"].select)i=0===l||l?t.setOneValue(t.selectValues,s,l):t.setOneValue(t.selectValues,s,void 0);else if(c.type===u["a"].checkbox){var o,r=t.valuesHasOwnProperty(t.checkboxValues,s);if(c.customValue instanceof Array){var d=(c.customValue[0]||"").toString();o=l===d}else o=!!l;t.$set(t.checkboxValues,r,o),i=!0}else i=c.type===u["a"].date||c.type===u["a"].datetime?t.setOneValue(t.jdateValues,s,l):c.type===u["a"].input_pop?t.setOneValue(t.jInputPopValues,s,l):c.type===u["a"].slot?t.setOneValue(t.slotValues,s,l):c.type===u["a"].upload||c.type===u["a"].image||c.type===u["a"].file?t.setOneValue(t.uploadValues,s,l):c.type===u["a"].popup?t.setOneValue(t.popupValues,s,l):c.type===u["a"].radio?t.setOneValue(t.radioValues,s,l):c.type===u["a"].list_multi?t.setOneValue(t.multiSelectValues,s,l,!0):c.type===u["a"].sel_search&&t.setOneValue(t.searchSelectValues,s,l)}i&&t.elemValueChange(c.type,P({},e,l),c,l)}()}}catch(p){s=!0,o=p}finally{try{l||null==d.return||d.return()}finally{if(s)throw o}}}};for(var l in n)i(l)})),this.forceUpdateFormValues()},setOneValue:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.valuesHasOwnProperty(e,t);return!!i&&(n&&!Array.isArray(a)&&(a=(a||"").toString().trim(),a=""===a?[]:a.split(",")),this.$set(e,i,a),!0)},valuesHasOwnProperty:function(e,t){var a=t;return e.hasOwnProperty(a)?a:e.hasOwnProperty(a+this.tempId)?a+this.tempId:null},validateOneInputAsync:function(e,t,a,n){var i=this,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"input",o=arguments.length>6?arguments[6]:void 0,r=Object.assign({},this.tooltips),u=a.key+t.id;r[u]=r[u]?r[u]:{};var d=this.validateValue(a,e),c=m(d,2),p=c[0],h=c[1],f=function(e){var t=m(e,2),s=t[0],d=t[1];if(null!=s){r[u].visible=!s,r[u].passed=s;var c=n.indexOf(u);s?-1!==c&&n.splice(c,1):(r[u].title=i.replaceProps(a,d),-1===c&&n.push(u))}l&&(i.tooltips=r,i.notPassedIds=n),"function"===typeof o&&o([r[u],n])};if("function"===typeof p){var y=!1;p(s,e,{id:this.getCleanId(t.id)},_({},a),(function(e,t){y||(y=!0,"string"===typeof t&&(h=t),f(null==e?[!0,h]:[!!e,h]))}),this)}else f([p,h]);return[r[u],n]},validateOneInput:function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"input";return this.validateOneInputAsync(e,t,a,n,i,l)},validateValue:function(e,t){var a=e.validateRules,n=!0,i="";if(a instanceof Array){var l=!0,s=!1,o=void 0;try{for(var r,u=a[Symbol.iterator]();!(l=(r=u.next()).done);l=!0){var d=r.value,c=null==t||""===t;if(!0===d.required&&c)n=!1;else if(!0===d.unique||"only"===d.pattern){var p=this.getValuesSync({validate:!1}),h=p.values,f=0,y=!0,m=!1,g=void 0;try{for(var v,b=h[Symbol.iterator]();!(y=(v=b.next()).done);y=!0){var w=v.value;if(w[e.key]===t&&++f>=2){n=!1;break}}}catch(_){m=!0,g=_}finally{try{y||null==b.return||b.return()}finally{if(m)throw g}}}else if(d.pattern&&!c){for(var V=[{title:"6到16位数字",value:"n6-16",pattern:/^\d{6,18}$/},{title:"6到16位任意字符",value:"*6-16",pattern:/^.{6,16}$/},{title:"6到18位字母",value:"s6-18",pattern:/^[a-z|A-Z]{6,18}$/},{title:"网址",value:"url",pattern:/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/},{title:"电子邮件",value:"e",pattern:/^([\w]+\.*)([\w]+)@[\w]+\.\w{3}(\.\w{2}|)$/},{title:"手机号码",value:"m",pattern:/^1[3456789]\d{9}$/},{title:"邮政编码",value:"p",pattern:/^[1-9]\d{5}$/},{title:"字母",value:"s",pattern:/^[A-Z|a-z]+$/},{title:"数字",value:"n",pattern:/^-?\d+(\.?\d+|\d?)$/},{title:"整数",value:"z",pattern:/^-?\d+$/},{title:"非空",value:"*",pattern:/^.+$/},{title:"金额",value:"money",pattern:/^(([1-9][0-9]*)|([0]\.\d{0,2}|[1-9][0-9]*\.\d{0,2}))$/}],C=!1,S=0,k=V;S<k.length;S++){var I=k[S];if(d.pattern===I.value&&I.pattern){n=new RegExp(I.pattern).test(t),C=!0;break}}C||(n=new RegExp(d.pattern).test(t))}else if("function"===typeof d.handler)return[d.handler,d.message];if(!n){i=d.message;break}}}catch(_){s=!0,o=_}finally{try{l||null==u.return||u.return()}finally{if(s)throw o}}}return[n,i]},updateFormValues:function(){var e=this,t=this.getElement("tbody").getElementsByClassName("tr"),a=[],n=!0,i=!1,l=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var r=s.value;a.push(r)}}catch(S){i=!0,l=S}finally{try{n||null==o.return||o.return()}finally{if(i)throw l}}var u=a;if(this.visibleTrEls.length>0){u=[];var d=!0,c=!1,p=void 0;try{for(var h,f=a[Symbol.iterator]();!(d=(h=f.next()).done);d=!0){var y=h.value,m=!0,g=!0,v=!1,b=void 0;try{for(var w,V=this.visibleTrEls[Symbol.iterator]();!(g=(w=V.next()).done);g=!0){var C=w.value;if(C.id===y.id){m=!1;break}}}catch(S){v=!0,b=S}finally{try{g||null==V.return||V.return()}finally{if(v)throw b}}m&&u.push(y)}}catch(S){c=!0,p=S}finally{try{d||null==f.return||f.return()}finally{if(c)throw p}}}this.visibleTrEls=a,u.forEach((function(t){var a=t.dataset.idx,n=e.inputValues[a];for(var i in n)if(n.hasOwnProperty(i)){var l="".concat(i).concat(n.id),s=document.getElementById(l);s&&(s.value=n[i])}}))},forceUpdateFormValues:function(){var e=this;this.visibleTrEls=[],this.$forceUpdate(),this.$nextTick((function(){return e.updateFormValues()}))},recalcAllStatisticsColumns:function(){var e=this;this.hasStatisticsColumn&&Object.keys(this.statisticsColumns).forEach((function(t){return e.recalcOneStatisticsColumn(t)}))},recalcOneStatisticsColumn:function(e){if(this.hasStatisticsColumn&&this.statisticsColumns.hasOwnProperty(e)){var t=0;this.inputValues.forEach((function(a){var n=a[e];if(n&&"-"!==t)try{t+=Number.parseInt(n)}catch(i){t="-"}})),this.statisticsColumns[e]=t}},getStatisticsValue:function(e){return this.hasStatisticsColumn&&this.statisticsColumns.hasOwnProperty(e)?this.statisticsColumns[e]:null},handleChangeCheckedAll:function(){var e=this,t=[];this.getSelectAll||this.rows.forEach((function(a){-1===(e.disabledRowIds||[]).indexOf(a.id)&&t.push(a.id)})),this.selectedRowIds=t},handleChangeLeftCheckbox:function(e){var t=e.target.id;if(-1===(this.disabledRowIds||[]).indexOf(t)){var a=this.selectedRowIds.indexOf(t);-1!==a?this.selectedRowIds.splice(a,1):this.selectedRowIds.push(t)}},handleClickAdd:function(){this.add()},handleConfirmDelete:function(){this.removeSelectedRows()},handleClickClearSelection:function(){this.clearSelection()},clearSelection:function(){this.selectedRowIds=[]},handleSelectFilterOption:function(e,t,a){return!0!==a.allowSearch&&!0!==a.allowInput||t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleSearchSelect:function(e,t,a,n){if(!0!==n.allowSearch&&!0===n.allowInput){var i=!1,l=!0,s=!1,o=void 0;try{for(var r,u=n.options[Symbol.iterator]();!(l=(r=u.next()).done);l=!0){var d=r.value;if(d.value.toLocaleString()===e.toLocaleString()){i=!0;break}}}catch(c){s=!0,o=c}finally{try{l||null==u.return||u.return()}finally{if(s)throw o}}!i&&e&&n.options.push({title:e,value:e,searchAdd:!0})}},handleBlurSearch:function(e,t,a,n){if(!0===n.allowInput&&"string"===typeof e){var i=[];n.options.forEach((function(t,a){t.value.toLocaleString()===e.toLocaleString()?delete t.searchAdd:!0===t.searchAdd&&i.push(a)}));var l=!0,s=!1,o=void 0;try{for(var r,u=i.reverse()[Symbol.iterator]();!(l=(r=u.next()).done);l=!0){var d=r.value;n.options.splice(d,1)}}catch(c){s=!0,o=c}finally{try{l||null==u.return||u.return()}finally{if(s)throw o}}}this.validateOneInput(e,a,n,this.notPassedIds,!0,"blur")},emitDragged:function(e,t){this.$emit("dragged",{oldIndex:e,newIndex:t,target:this})},handleDragMoveStart:function(e){this.dragging=!0,this.$refs.scrollView.style.overflow="hidden"},handleDragMoveEnd:function(e){this.dragging=!1,this.$refs.scrollView.style.overflow="auto";var t=e.oldIndex,a=e.newIndex,n=e.item.dataset.idx,i=Number.parseInt(n)-t;t+=i,a+=i,this.rowResort(t,a),this.emitDragged(t,a)},rowResort:function(e,t){var a=function(a){var n=a[e];a.splice(e,1),a.splice(t,0,n)};a(this.rows),a(this.inputValues),this.recalcSortNumber(),this.forceUpdateFormValues()},recalcSortNumber:function(){var e=this;this.dragSort&&this.inputValues.forEach((function(t,a){return t[e.dragSortKey]=a+1}))},_handleRowMoveUp:function(e){if(e>0){var t=e-1;this.rowResort(e,t),this.emitDragged(e,t)}},_handleRowMoveDown:function(e){if(e<this.rows.length-1){var t=e+1;this.rowResort(e,t),this.emitDragged(e,t)}},_handleRowInsertDown:function(e){var t=e+1;this.insert(t)},handleInputCommono:function(e,t,a,n){var i=this.inputValues[t][n.key]||"",l=e.value,s=e.dataset,o=e.selectionStart,r=u["a"].input,d=!0;"true"==="".concat(s.inputNumber)&&(r=u["a"].inputNumber,/^-?\d+\.?\d*$/.test(l)||""===l||"-"===l||(d=!1,l=i,e.value=l,"number"===typeof o&&(e.selectionStart=o-1,e.selectionEnd=o-1))),this.inputValues[t][n.key]=l,this.validateOneInput(l,a,n,this.notPassedIds,!0,"input"),r===u["a"].inputNumber&&this.recalcOneStatisticsColumn(n.key),d&&this.elemValueChange(r,a,n,l)},handleChangeSlotCommon:function(e,t,a,n){this.slotValues=this.bindValuesChange(e,t,"slotValues"),this.validateOneInput(e,a,n,this.notPassedIds,!0,"change"),this.elemValueChange(u["a"].slot,a,n,e)},handleBlurCommono:function(e,t,a,n){var i=e.value,l=e.dataset;l&&"true"==="".concat(l.inputNumber)&&(i=/^-?\d+\.?\d*$/.test(i)?Number.parseFloat(i):"",e.value=i),this.validateOneInput(i,a,n,this.notPassedIds,!0,"blur")},handleChangeCheckboxCommon:function(e,t,a){var n=e.target,i=n.id,l=n.checked;this.checkboxValues=this.bindValuesChange(l,i,"checkboxValues"),this.elemValueChange(u["a"].checkbox,t,a,l)},handleChangeSelectCommon:function(e,t,a,n){this.selectValues=this.bindValuesChange(e,t,"selectValues"),this.validateOneInput(e,a,n,this.notPassedIds,!0,"change"),this.elemValueChange(u["a"].select,a,n,e)},handleChangeJDateCommon:function(e,t,a,n,i){this.jdateValues=this.bindValuesChange(e,t,"jdateValues"),this.validateOneInput(e,a,n,this.notPassedIds,!0,"change"),i?this.elemValueChange(u["a"].datetime,a,n,e):this.elemValueChange(u["a"].date,a,n,e)},handleChangeJInputPopCommon:function(e,t,a,n){this.jInputPopValues=this.bindValuesChange(e,t,"jInputPopValues"),this.validateOneInput(e,a,n,this.notPassedIds,!0,"change"),this.elemValueChange(u["a"].input_pop,a,n,e)},handleChangeUpload:function(e,t,a,n){var i=e.file,l={name:i.name,type:i.type,size:i.size,status:i.status,percent:i.percent};n.responseName&&i.response&&(l["responseName"]=i.response[n.responseName]),"done"===i.status?l["path"]=i.response[n.responseName]:"error"===i.status&&(l["message"]=i.response.message||"未知错误"),this.uploadValues=this.bindValuesChange(l,t,"uploadValues"),this.elemValueChange(n.type,a,n,l)},handleMoreOperation:function(e,t){var a="";this.uploadValues&&this.uploadValues[e]&&(a=this.uploadValues[e].path),this.$refs.filePop.show(e,a,t)},handleFileSuccess:function(e){e.id&&(this.uploadValues=this.bindValuesChange(e,e.id,"uploadValues"))},handleClickTableRow:function(e){var t=e.target;"td"!==t.className&&"tr"!==t.className||(this.currentEditRows={})},handleEditRow:function(e,t){var a=this;this.alwaysEdit||(this.currentEditRows=P({},e.id,P({},t.key,!0)),t.type!==u["a"].input&&t.type!==u["a"].inputNumber||this.$nextTick((function(){a.forceUpdateFormValues();var n=document.getElementById("".concat(t.key).concat(e.id));n&&n.focus()})))},bindValuesChange:function(e,t,a){return this.$set(this[a],t,e),this[a]},elemValueChange:function(e,t,a,n){var i=Object.assign({},a),l=Object.assign({},t);l.id=this.getCleanId(l.id);var s=this.getValuesSync({validate:!1,rowIds:[l.id]}),o=s.values;o.length>0&&Object.assign(l,o[0]),this.$emit("valueChange",{type:e,row:l,column:i,value:n,target:this})},getCleanId:function(e){return e=this.removeCaseId(e),e=this.removeTempId(e),e},hasCaseId:function(e){return e&&e.startsWith(this.caseId)},removeCaseId:function(e){return this.hasCaseId(e)?e.substring(this.caseId.length,e.length):e},isTempId:function(e){return(e||"").endsWith(this.tempId)},removeTempId:function(e){return this.isTempId(e)?e.substring(0,e.length-this.tempId.length):e},handleClickDelFile:function(e){this.uploadValues[e]=null},handleClickDownloadFile:function(e){var t=this.uploadValues[e]||{},a=t.path;if(a){var n=Object(h["d"])(a);window.open(n)}},handleClickDownFileByUrl:function(e){var t=this.uploadValues[e]||{},a=t.url,n=t.path;a&&0!==a.length||n&&n.length>0&&(a=Object(h["d"])(n.split(",")[0])),a&&window.open(a)},handleClickShowImageError:function(e){var t=this.uploadValues[e]||null;t&&t["message"]&&this.$error({title:"上传出错",content:"错误信息："+t["message"],maskClosable:!0})},_loadDictConcatToOptions:function(e){var t=this;Object(p["d"])(e.dictCode).then((function(a){if(a.success){var n=e.options||[];a.result.forEach((function(e){var t=!0,a=!1,i=void 0;try{for(var l,s=n[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var o=l.value;if(o.value===e.value)return}}catch(r){a=!0,i=r}finally{try{t||null==s.return||s.return()}finally{if(a)throw i}}n.push(e)})),t.$set(e,"options",n)}}))},log:function(){this.$attrs.logger},getVM:function(){return this},buildTooltipProps:function(e,t,a){var n=this.notPassedIds,i=this.tooltips,l={title:(i[a]||{}).title,placement:"top",autoAdjustOverflow:!0,getPopupContainer:this.getParentContainer,class:{"j-check-failed":!1}},s=n.includes(a);return s?l.class["j-check-failed"]=!0:l["visible"]=!1,l},getParentContainer:function(e){var t=this,a=function(){if(t.$el&&8!==t.$el.nodeType)return t.$el;var a=document.getElementById(t.caseId+"inputTable");return null!=a?a:e.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode}(),n=function e(t){var a=null;if(t["currentStyle"]?a=t["currentStyle"]["overflow"]:window.getComputedStyle&&(a=window.getComputedStyle(t)["overflow"]),null!=a){if("hidden"===a){var n=e(t.parentNode);return null!=n?n:t.parentNode}return t.parentNode&&"body"!==t.parentNode.tagName.toLocaleLowerCase()?e(t.parentNode):null}return t},i=n(a);return null!=i?i:a},replaceProps:function(e,t){return t&&"string"===typeof t&&(t=t.replace(/\${title}/g,e.title),t=t.replace(/\${key}/g,e.key),t=t.replace(/\${defaultValue}/g,e.defaultValue)),t},buildTrStyle:function(e){return{top:"".concat(O*e,"px")}},buildTdStyle:function(e){var t=function(e){return e.type===u["a"].hidden||"0px"===e.width||"0"===e.width||0===e.width},a={};e.width?a["width"]=e.width:this.columns?a["width"]="".concat(92/this.columns.filter((function(e){return!t(e)})).length,"%"):a["width"]="120px";var n=e.type===u["a"].checkbox;return n&&(a["align-items"]="center",a["text-align"]="center",a["padding-left"]="0",a["padding-right"]="0"),t(e)&&(a["padding-left"]="0",a["padding-right"]="0"),a},buildProps:function(e,t){var a={};if("object"===w(t.props))for(var n in t.props)t.props.hasOwnProperty(n)&&(a[n]=this.replaceProps(t,t.props[n]));return t.type!==u["a"].select||!0!==t.allowInput&&!0!==t.allowSearch||(a["showSearch"]=!0),a["disabled"]="boolean"===typeof t["disabled"]?t["disabled"]:a["disabled"],!0!==a["disabled"]&&(a["disabled"]=-1!==(this.disabledRowIds||[]).indexOf(e.id)),!0===this.disabled&&(a["disabled"]=!0),a},checkTooFastClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,a=Date.now(),n=this.lastPushTimeMap.get(e);if(!n)return n=a,this.lastPushTimeMap.set(e,a),!1;var i=a-n;return i<=t?(this.$message.warn("你点击的太快了，请慢点点击!"),!0):(this.lastPushTimeMap.set(e,a),!1)},uploadGetHeaders:function(e,t){var a={};return!0===t.token&&(a["X-Access-Token"]=this.accessToken),a},getUploadAction:function(e){return e||window._CONFIG["domianURL"]+"/sys/common/upload"},getCellImageView:function(e){var t=this.uploadValues[e]||null;if(t){if(t["url"])return t["url"];if(t["path"]){var a=t["path"].split(",")[0];return Object(h["d"])(a)}}return""},popupCallback:function(e,t,a,n,i,l){var s=e;if(t){var o=this.getCleanId(n.id),r={rowKey:o,values:{}};Object.keys(t).forEach((function(e){e===i.key?s=t[e]:r.values[e]=t[e]})),Object.keys(r).length>0&&this.setValues([r])}this.setOneValue(this.popupValues,a,s),this.validateOneInput(e,n,i,this.notPassedIds,!0,"change"),this.elemValueChange("input",n,i,e)},getPopupValue:function(e){return this.popupValues[e]},handleRadioChange:function(e,t,a,n){this.radioValues=this.bindValuesChange(e,t,"radioValues"),this.validateOneInput(e,a,n,this.notPassedIds,!0,"change"),this.elemValueChange(u["a"].radio,a,n,e)},handleMultiSelectChange:function(e,t,a,n){this.multiSelectValues=this.bindValuesChange(e,t,"multiSelectValues"),this.validateOneInput(e,a,n,this.notPassedIds,!0,"change"),this.elemValueChange(u["a"].list_multi,a,n,e)},handleSearchSelectChange:function(e,t,a,n){this.searchSelectValues=this.bindValuesChange(e,t,"searchSelectValues"),this.validateOneInput(e,a,n,this.notPassedIds,!0,"change"),this.elemValueChange(u["a"].sel_search,a,n,e)},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},getEllipsisWord:function(e,t){return e&&0!==e.length?e.length>t?e.substr(0,t):e:""},getSelectTranslateText:function(e,t,a){return Object(p["a"])(a.options,e)},isEditRow:function(e,t){if(this.alwaysEdit)return!0;var a=this.currentEditRows[e.id];return!(!a||!0!==a[t.key])},handleMouseup:function(e){if(!this.alwaysEdit&&0!==Object.keys(this.currentEditRows).length){var t=e.target;if(t){var a=t.className||"";if("string"===typeof a){if(a.includes("j-td-span")&&a.includes("no-edit"))return;if(a.includes("ant-select-dropdown-menu-item"))return}var n=Object(d["f"])(e),i=!0,l=!1,s=void 0;try{for(var o,r=n[Symbol.iterator]();!(i=(o=r.next()).done);i=!0){var u=o.value;if((u.id||"").startsWith("".concat(this.caseId,"tbody-tr")))return;var c=u.className||"";if(c="string"===typeof c?c:c.toString(),c.includes("j-input-pop"))return;if(c.includes("j-popup-modal"))return;if(c.includes("j-date-picker")||c.includes("ant-calendar-picker-container"))return}}catch(p){l=!0,s=p}finally{try{i||null==r.return||r.return()}finally{if(l)throw s}}this.currentEditRows={}}}},addEventListener:function(){window.addEventListener("mouseup",this.handleMouseup)},removeEventListener:function(){window.removeEventListener("mouseup",this.handleMouseup)}},beforeDestroy:function(){this.removeEventListener(),this.destroyCleanGroupRequest=!0}},x=T,j=(a("e6a4"),a("2877")),E=Object(j["a"])(x,n,i,!1,null,"7e630d06",null);t["default"]=E.exports},e2e0:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return r}));var n=a("ca00");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var l={normal:"normal",input:"input",inputNumber:"inputNumber",checkbox:"checkbox",select:"select",date:"date",datetime:"datetime",upload:"upload",file:"file",image:"image",popup:"popup",list_multi:"list_multi",sel_search:"sel_search",radio:"radio",checkbox_meta:"checkbox_meta",input_pop:"input_pop",slot:"slot",hidden:"hidden"},s=Symbol();function o(e,t){return new Promise((function(a){(function n(){var i=e.$refs[t];i?a(i):setTimeout((function(){n()}),10)})()}))}function r(e,t){if(!e||"function"!==typeof e.validateFields)throw"form 参数需要的是一个form对象，而传入的却是".concat(i(e));var a={};return new Promise((function(t,a){e.validateFields((function(e,n){e?a({error:s}):t(n)}))})).then((function(e){return Object.assign(a,{formValue:e}),u(t)})).then((function(e){return Object.assign(a,{tablesValue:e}),Promise.resolve(a)})).catch((function(e){return Promise.reject(e)}))}function u(e,t){if(!(e instanceof Array))throw"'validateTables'函数的'cases'参数需要的是一个数组，而传入的却是".concat(i(e));return new Promise((function(a,i){var l=[],o=0;e&&0!==e.length||a(),function r(){var u=e[o];u.getAll(!0,t).then((function(t){l[o]=t,++o===e.length?a(l):r()}),(function(e){if(e===s){var t,a=Object(n["g"])(u,"ATabPane");a&&(t=a.$vnode.key),i({error:s,index:o,paneKey:t})}i(e)}))}()}))}},e6a4:function(e,t,a){"use strict";var n=a("707a"),i=a.n(n);i.a}}]);