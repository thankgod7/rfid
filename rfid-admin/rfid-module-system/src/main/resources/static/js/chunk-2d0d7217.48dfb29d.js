(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7217"],{7602:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{title:"弹出子表示例",bordered:!1}},[a("j-vxe-table",{attrs:{toolbar:"","row-number":"","row-selection":"","highlight-current-row":"","click-row-show-sub-form":"","click-row-show-main-form":"",height:750,loading:e.loading,columns:e.columns,dataSource:e.dataSource},on:{detailsConfirm:e.handleDetailsConfirm},scopedSlots:e._u([{key:"mainForm",fn:function(t){var o=t.row;return[o?[a("a-form-model",{ref:"form2",attrs:{model:o,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-row",{attrs:{gutter:8}},[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"ID",prop:"id"}},[a("a-input",{attrs:{disabled:""},model:{value:o.id,callback:function(t){e.$set(o,"id",t)},expression:"row.id"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"序号",prop:"num"}},[a("a-input",{model:{value:o.num,callback:function(t){e.$set(o,"num",t)},expression:"row.num"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"船名",prop:"ship_name"}},[a("a-input",{model:{value:o.ship_name,callback:function(t){e.$set(o,"ship_name",t)},expression:"row.ship_name"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"呼叫",prop:"call"}},[a("a-input",{model:{value:o.call,callback:function(t){e.$set(o,"call",t)},expression:"row.call"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"长",prop:"len"}},[a("a-input",{model:{value:o.len,callback:function(t){e.$set(o,"len",t)},expression:"row.len"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"吨",prop:"ton"}},[a("a-input",{model:{value:o.ton,callback:function(t){e.$set(o,"ton",t)},expression:"row.ton"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"付款方",prop:"payer"}},[a("a-input",{model:{value:o.payer,callback:function(t){e.$set(o,"payer",t)},expression:"row.payer"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"数",prop:"count"}},[a("a-input",{model:{value:o.count,callback:function(t){e.$set(o,"count",t)},expression:"row.count"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"公司",prop:"company"}},[a("a-input",{model:{value:o.company,callback:function(t){e.$set(o,"company",t)},expression:"row.company"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"动向",prop:"trend"}},[a("a-input",{model:{value:o.trend,callback:function(t){e.$set(o,"trend",t)},expression:"row.trend"}})],1)],1)],1)],1)]:e._e()]}},{key:"subForm",fn:function(t){var o=t.row;return[e.loadSubData(o)?[a("j-vxe-table",{ref:"subFormTable",attrs:{height:"auto","max-height":350,loading:e.subTable.loading,columns:e.subTable.columns,dataSource:e.subTable.dataSource}})]:e._e()]}}])})],1)},l=[],n=a("0fea"),r=a("2475"),i={name:"PopupSubTable",data:function(){return{loading:!1,dataSource:[],columns:[{key:"num",title:"序号",width:"80px"},{key:"ship_name",title:"船名",width:"180px",type:r["b"].input},{key:"call",title:"呼叫",width:"80px"},{key:"len",title:"长",width:"80px"},{key:"ton",title:"吨",width:"120px"},{key:"payer",title:"付款方",width:"120px"},{key:"count",title:"数",width:"40px"},{key:"company",title:"公司",minWidth:"180px",showDetails:!0},{key:"trend",title:"动向",width:"120px"}],subTable:{currentRowId:null,loading:!1,pagination:{current:1,pageSize:200,pageSizeOptions:["100","200"],total:0},selectedRows:[],dataSource:[],columns:[{key:"dd_num",title:"调度序号",width:"120px"},{key:"tug",title:"拖轮",width:"180px",type:r["b"].input},{key:"work_start_time",title:"作业开始时间",width:"180px",type:r["b"].input},{key:"work_stop_time",title:"作业结束时间",width:"180px",type:r["b"].input},{key:"type",title:"船舶分类",width:"120px",type:r["b"].input},{key:"port_area",title:"所属港区",minWidth:"120px",type:r["b"].input}]},url:{getData:"/mock/vxe/getData"},mainForm:{id:"",num:"",ship_name:"",call:"",len:"",ton:"",payer:"",count:"",company:"",trend:""},labelCol:{span:4},wrapperCol:{span:20},rules:{num:[{required:!0,message:"必须输入序号"}]}}},created:function(){this.loadData()},methods:{log:console.log,loadData:function(){var e=this,t={pageNo:1,pageSize:30};this.loading=!0,Object(n["c"])(this.url.getData,t).then((function(t){t.success?(e.dataSource=t.result.records,e.selectedRows=[]):e.$error({title:"主表查询失败",content:t.message})})).finally((function(){e.loading=!1}))},loadSubData:function(e){var t=this;if(e){if(this.subTable.currentRowId===e.id)return!0;this.subTable.currentRowId=e.id;var a={pageNo:1,pageSize:30,parentId:e.id};return this.subTable.loading=!0,Object(n["c"])(this.url.getData,a).then((function(e){e.success?t.subTable.dataSource=e.result.records:t.$error({title:"主表查询失败",content:e.message})})).finally((function(){t.subTable.loading=!1})),!0}return!1},handleDetailsConfirm:function(e){var t=this,a=e.row,o=e.$table,l=e.callback;o.validate(a).then((function(e){e?(l(!1),t.$message.warn("校验失败")):(l(!0),t.loading=!0,setTimeout((function(){t.loading=!1,t.$message.success("保存成功")}),1e3))}))}}},s=i,u=a("2877"),c=Object(u["a"])(s,o,l,!1,null,"2f1a057f",null);t["default"]=c.exports}}]);